<div class="wrapper-table">
  <div class="table">
    @for (row of board; let rowIndex = $index; track row[0]().row) {
      @for (cell of row; let colIndex = $index; track cell().col) {
        @let cellData = cell();
        @let cellColor = cellData.color;
        @let isLastRow = rowIndex === board.length - 1;
        @let isLastCol = colIndex === row.length - 1;
        @let isFirstRow = rowIndex === 0;
        @let isFirstCol = colIndex === 0;
        @let piece = cellData.piece;

        <span
          class="cell"
          [class]="'cell-' + (cellData.col + cellData.row).toUpperCase()"
          [ngClass]="{
            'cell-white': cellColor === 'white',
            'cell-black': cellColor === 'black',
            'rounded-top-left': isFirstRow && isFirstCol,
            'rounded-top-right': isFirstRow && isLastCol,
            'rounded-bottom-left': isLastRow && isFirstCol,
            'rounded-bottom-right': isLastRow && isLastCol,
          }"
        >
          @if (isLastCol) {
            <span
              class="row-value"
              [ngClass]="{
                'text-black': cellColor === 'white',
                'text-white': cellColor === 'black',
              }"
            >
              {{ cellData.row }}
            </span>
          }
          @if (isLastRow) {
            <span
              class="col-value"
              [ngClass]="{
                'text-black': cellColor === 'white',
                'text-white': cellColor === 'black',
              }"
            >
              {{ cellData.col }}
            </span>
          }
     
          @if (piece) {
            <chess-piece [piece]="piece" />
          }
        </span>
      }
    }
  </div>
</div>
